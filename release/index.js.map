{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'block',\r\n\twidth: '100%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst setCss = (obj, style) => {\r\n  for (let attr in style){\r\n    obj.style[attr] = style[attr];\r\n  };\r\n};\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'en',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n\tisPhone = false,\r\n\tisWeb = false,\r\n\tisEmail = false,\r\n\tisPassword = false,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n\tisMust,\r\n\tisPhone,\r\n\tisWeb,\r\n\tisEmail,\r\n\tisPassword,\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\tsetCss(input, deaultStyle);\r\n\tinput.placeholder = prop.placeholder;\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\t// formatTest(inputText, prop);\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(formatRes);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res = {};\r\n\tif (prop.isPhone) {\r\n\t\tlet phone = regPhone.test(val);\r\n\t\tconsole.log(phone);\r\n\t\tres['phone'] = phone;\r\n\t}\r\n\tif (prop.isEmail) {\r\n\t\tlet email = regEmail.test(val);\r\n\t\tconsole.log(email);\r\n\t\tres['email'] = email;\r\n\t}\r\n\tif (prop.isWeb) {\r\n\t\tlet web = regWeb.test(val);\r\n\t\tconsole.log(web);\r\n\t\tres['web'] = web;\r\n\t}\r\n\tif (prop.isPassword) {\r\n\t\tlet password = deaultPassword.test(val);\r\n\t\tconsole.log(password);\r\n\t\tres['password'] = password;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport { init };\r\n"],"names":["console","log","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","setCss","obj","style","attr","$","document","getElementById","id","setProps","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","isMust","isPhone","isWeb","isEmail","isPassword","init","properties","input","createElement","prop","appendChild","childNodes","className","inputText","watchTyping","inputNode","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","val","res","phone","test","email","web","password"],"mappings":"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"}