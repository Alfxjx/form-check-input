{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'block',\r\n\twidth: '100%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst setCss = (obj, style, shouldGetCSS) => {\r\n\tif(shouldGetCSS){\r\n    for (let attr in style) {\r\n      obj.style[attr] = style[attr];\r\n    }\r\n  }\r\n};\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'en',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n  type,\r\n  withdefaultCSS = true,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n\tisMust,\r\n  type,\r\n  withdefaultCSS\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\tsetCss(input, deaultStyle, prop.withdefaultCSS);\r\n\tinput.placeholder = prop.placeholder;\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\t// formatTest(inputText, prop);\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(`${prop.type}+${formatRes}`);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res;\r\n  switch(prop.type){\r\n    case(\"email\"):\r\n      res = regEmail.test(val);\r\n      break;\r\n    case(\"phone\"):\r\n      res = regPhone.test(val);\r\n      break;\r\n    case(\"web\"):\r\n      res = regWeb.test(val);\r\n      break;\r\n    case(\"password\"):\r\n      res = deaultPassword.test(val);\r\n      break;\r\n    default:\r\n      res = true;\r\n      break;  \r\n  }\r\n\treturn res;\r\n};\r\n\r\nexport { init };\r\n"],"names":["console","log","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","setCss","obj","style","shouldGetCSS","attr","$","document","getElementById","id","setProps","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","isMust","type","withdefaultCSS","init","properties","input","createElement","prop","appendChild","childNodes","className","inputText","watchTyping","inputNode","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","val","res","test"],"mappings":"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"}