{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'inline-block',\r\n\twidth: '80%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst svgEyeClosed = [\r\n\t'M512 800c-66.112 0-128.32-24.896-182.656-60.096l94.976-94.976A156.256 156.256 0 0 0 512 672c88.224 0 160-71.776 160-160a156.256 156.256 0 0 0-27.072-87.68l101.536-101.536C837.28 398.624 896 493.344 896 512c0 32-171.936 288-384 288m96-288a96 96 0 0 1-96 96c-14.784 0-28.64-3.616-41.088-9.664l127.424-127.424c6.048 12.448 9.664 26.304 9.664 41.088M128 512c0-32 171.936-288 384-288 66.112 0 128.32 24.896 182.656 60.096L277.536 701.216C186.72 625.376 128 530.656 128 512m664.064-234.816l91.328-91.328-45.248-45.248-97.632 97.632C673.472 192.704 595.456 160 512 160 265.248 160 64 443.008 64 512c0 39.392 65.728 148.416 167.936 234.816l-91.328 91.328 45.248 45.248 97.632-97.632C350.528 831.296 428.544 864 512 864c246.752 0 448-283.008 448-352 0-39.392-65.728-148.416-167.936-234.816',\r\n\t'M512 352c-88.224 0-160 71.776-160 160 0 15.328 2.848 29.856 6.88 43.872l58.592-58.592a95.616 95.616 0 0 1 79.808-79.808l58.592-58.592A157.76 157.76 0 0 0 512 352',\r\n];\r\n\r\nconst svgEyeOpen = [\r\n\t'M512 608a96 96 0 1 1 0-192 96 96 0 0 1 0 192m0-256c-88.224 0-160 71.776-160 160s71.776 160 160 160 160-71.776 160-160-71.776-160-160-160',\r\n\t'M512 800c-212.064 0-384-256-384-288s171.936-288 384-288 384 256 384 288-171.936 288-384 288m0-640C265.248 160 64 443.008 64 512c0 68.992 201.248 352 448 352s448-283.008 448-352c0-68.992-201.248-352-448-352',\r\n];\r\n\r\nconst svgClear = [\r\n\t'M512 896C299.936 896 128 724.064 128 512S299.936 128 512 128s384 171.936 384 384-171.936 384-384 384m0-832C264.96 64 64 264.96 64 512s200.96 448 448 448 448-200.96 448-448S759.04 64 512 64',\r\n\t'M665.376 313.376L512 466.752l-153.376-153.376-45.248 45.248L466.752 512l-153.376 153.376 45.248 45.248L512 557.248l153.376 153.376 45.248-45.248L557.248 512l153.376-153.376z',\r\n];\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'cn',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n\tmustPosition = 'left',\r\n\ttype,\r\n\twithdefaultCSS = true,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n\tisMust,\r\n\tmustPosition,\r\n\ttype,\r\n\twithdefaultCSS,\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\r\n\t// 绑定一个class\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\r\n\t// 设置css\r\n\tsetCss(input, deaultStyle, prop.withdefaultCSS);\r\n\r\n\t// 设置placeholder\r\n\tinput.placeholder = prop.placeholder;\r\n\r\n\t// 绑定监听输入\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\r\n\t// 展示eye\r\n\tlet showEyeRes = showWhichEye(id, prop);\r\n\r\n\t// 切换Eye\r\n\tswitchEye(id, prop, showEyeRes);\r\n\r\n\t// 展示clear\r\n\tdrawClear(id, prop);\r\n\r\n\t// 是否必填\r\n\tdrawMust(id, prop);\r\n};\r\n\r\nconst setCss = (obj, style, shouldGetCSS) => {\r\n\tif (shouldGetCSS) {\r\n\t\tfor (let attr in style) {\r\n\t\t\tobj.style[attr] = style[attr];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\r\n\t\t// 检查格式\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(`${prop.type}+${formatRes}`);\r\n\r\n\t\t// TODO: 渲染hint\r\n\t\tdrawHint(prop);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res;\r\n\tswitch (prop.type) {\r\n\t\tcase 'email':\r\n\t\t\tres = regEmail.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'phone':\r\n\t\t\tres = regPhone.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'web':\r\n\t\t\tres = regWeb.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'password':\r\n\t\t\tres = deaultPassword.test(val);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tres = true;\r\n\t\t\tbreak;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nconst showWhichEye = (id, prop) => {\r\n\tlet res;\r\n\tif (prop.type === 'password') {\r\n\t\t$(id).querySelector('input').type = 'password';\r\n\t\t$(id).querySelector('input').autocomplete = 'on';\r\n\t\tdrawEyeOpen(id, prop);\r\n\t\treturn (res = true);\r\n\t} else {\r\n\t\tdrawEyeClosed(id, prop);\r\n\t\treturn (res = false);\r\n\t}\r\n};\r\n\r\nconst switchEye = (id, prop, showEyeRes) => {\r\n\tlet svgList = $(id).querySelectorAll('svg');\r\n\tif (svgList) {\r\n\t\tsvgList[0].addEventListener('click', () => {\r\n\t\t\tif(showEyeRes) {\r\n        drawEyeClosed(id,prop)\r\n        $(id).querySelector('input').type = 'text';\r\n      } else {\r\n        drawEyeOpen(id, prop);\r\n        $(id).querySelector('input').type = 'password';\r\n      }\r\n\t\t});\r\n\t} else {\r\n\t\tconsole.log('no svg');\r\n\t}\r\n};\r\n\r\nconst drawHint = prop => {};\r\n\r\nconst drawEyeOpen = (id, prop) => {\r\n\tif (prop.showEye) {\r\n\t\tif (prop.showClear && prop.isMust && prop.mustPosition === 'right') {\r\n\t\t\tdrawSVG(id, svgEyeOpen, '80px');\r\n\t\t} else if (!prop.showClear && prop.isMust && prop.mustPosition === 'right') {\r\n\t\t\tdrawSVG(id, svgEyeOpen, '60px');\r\n\t\t} else if (prop.showClear && prop.isMust && prop.mustPosition === 'left') {\r\n\t\t\tdrawSVG(id, svgEyeOpen, '65px');\r\n\t\t} else if (!prop.showClear && prop.isMust && prop.mustPosition === 'left') {\r\n\t\t\tdrawSVG(id, svgEyeOpen, '45px');\r\n\t\t}\r\n\t\tif (prop.showClear && !prop.isMust) {\r\n\t\t\tdrawSVG(id, svgEyeOpen, '80px');\r\n\t\t}\r\n\t\tif (!prop.showClear && !prop.isMust) {\r\n\t\t\tdrawSVG(id, svgEyeOpen, '60px');\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst drawEyeClosed = (id, prop) => {\r\n\tif (prop.showEye) {\r\n\t\tif (prop.showClear && prop.isMust && prop.mustPosition === 'right') {\r\n\t\t\tdrawSVG(id, svgEyeClosed, '80px');\r\n\t\t} else if (!prop.showClear && prop.isMust && prop.mustPosition === 'right') {\r\n\t\t\tdrawSVG(id, svgEyeClosed, '60px');\r\n\t\t} else if (prop.showClear && prop.isMust && prop.mustPosition === 'left') {\r\n\t\t\tdrawSVG(id, svgEyeClosed, '65px');\r\n\t\t} else if (!prop.showClear && prop.isMust && prop.mustPosition === 'left') {\r\n\t\t\tdrawSVG(id, svgEyeClosed, '45px');\r\n\t\t}\r\n\t\tif (prop.showClear && !prop.isMust) {\r\n\t\t\tdrawSVG(id, svgEyeClosed, '80px');\r\n\t\t}\r\n\t\tif (!prop.showClear && !prop.isMust) {\r\n\t\t\tdrawSVG(id, svgEyeClosed, '60px');\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst drawClear = (id, prop) => {\r\n\tif (prop.showClear) {\r\n\t\tif (prop.showEye && prop.isMust && prop.mustPosition === 'right') {\r\n\t\t\tdrawSVG(id, svgClear, '60px');\r\n\t\t} else if (!prop.showEye && prop.isMust && prop.mustPosition === 'right') {\r\n\t\t\tdrawSVG(id, svgClear, '45px');\r\n\t\t} else if (prop.showEye && prop.isMust && prop.mustPosition === 'left') {\r\n\t\t\tdrawSVG(id, svgClear, '45px');\r\n\t\t} else if (!prop.showEye && prop.isMust && prop.mustPosition === 'left') {\r\n\t\t\tdrawSVG(id, svgClear, '45px');\r\n\t\t}\r\n\t\tif (prop.showEye && !prop.isMust) {\r\n\t\t\tdrawSVG(id, svgClear, '60px');\r\n\t\t}\r\n\t\tif (!prop.showEye && !prop.isMust) {\r\n\t\t\tdrawSVG(id, svgClear, '45px');\r\n\t\t}\r\n\t\tlet svgList = $(id).querySelectorAll('svg');\r\n\t\tsvgList[svgList.length - 1].addEventListener('click', () => {\r\n\t\t\t$(id).querySelector('input').value = '';\r\n\t\t});\r\n\t}\r\n};\r\n\r\nconst drawMust = (id, prop) => {\r\n\tif (prop.isMust) {\r\n\t\tconsole.log('draw must');\r\n\t\tlet must = document.createElement('span');\r\n\t\tmust.innerHTML = '*';\r\n\t\tmust.style.color = 'red';\r\n\t\tmust.style.margin = '0 5px';\r\n\t\tswitch (prop.mustPosition) {\r\n\t\t\tcase 'left':\r\n\t\t\t\tlet inputNode = $(id).childNodes[0];\r\n\t\t\t\t$(id).insertBefore(must, inputNode);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\t$(id).appendChild(must);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst drawSVG = (id, svgProp, distanceToRight) => {\r\n\tlet svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\tsvg.setAttribute('width', '18');\r\n\tsvg.setAttribute('height', '18');\r\n\tsvg.setAttribute('viewBox', '0 0 1024 1024');\r\n\tsvg.setAttribute('version', '1.1');\r\n\tsvg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n\r\n\tlet path1 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n\tpath1.setAttribute('d', svgProp[0]);\r\n\tpath1.setAttribute('fill', '#000');\r\n\r\n\tlet path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n\tpath2.setAttribute('d', svgProp[1]);\r\n\tpath2.setAttribute('fill', '#000');\r\n\r\n\tsvg.appendChild(path1);\r\n\tsvg.appendChild(path2);\r\n\t$(id).appendChild(svg);\r\n\r\n\t$(id).style.position = 'relative';\r\n\tsvg.style.position = 'absolute';\r\n\tsvg.style.top = '8px';\r\n\tsvg.style.right = distanceToRight;\r\n};\r\n\r\nexport { init };\r\n"],"names":["console","log","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","svgEyeClosed","svgEyeOpen","svgClear","$","document","getElementById","id","setProps","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","isMust","mustPosition","type","withdefaultCSS","init","properties","input","createElement","prop","appendChild","childNodes","className","inputText","watchTyping","showEyeRes","showWhichEye","setCss","obj","style","shouldGetCSS","attr","inputNode","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","val","res","test","querySelector","autocomplete","switchEye","svgList","querySelectorAll","drawEyeOpen","drawEyeClosed","drawClear","length","drawMust","must","innerHTML","color","margin","insertBefore","drawSVG","svgProp","distanceToRight","svg","createElementNS","setAttribute","path1","path2","position","top","right"],"mappings":"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"}