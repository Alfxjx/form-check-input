{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'block',\r\n\twidth: '100%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst setCss = (obj, style, shouldGetCSS) => {\r\n\tif(shouldGetCSS){\r\n    for (let attr in style) {\r\n      obj.style[attr] = style[attr];\r\n    }\r\n  }\r\n};\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'en',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n  type,\r\n  withdefaultCSS = true,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n\tisMust,\r\n  type,\r\n  withdefaultCSS\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\tsetCss(input, deaultStyle, prop.withdefaultCSS);\r\n\tinput.placeholder = prop.placeholder;\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\t// formatTest(inputText, prop);\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(`${prop.type}+${formatRes}`);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res;\r\n  switch(prop.type){\r\n    case(\"email\"):\r\n      res = regEmail.test(val);\r\n      break;\r\n    case(\"phone\"):\r\n      res = regPhone.test(val);\r\n      break;\r\n    case(\"web\"):\r\n      res = regWeb.test(val);\r\n      break;\r\n    case(\"password\"):\r\n      res = deaultPassword.test(val);\r\n      break;\r\n    default:\r\n      res = true;\r\n      break;  \r\n  }\r\n\treturn res;\r\n};\r\n\r\nexport { init };\r\n"],"names":["console","log","$","document","getElementById","id","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","watchTyping","prop","inputNode","childNodes","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","type","val","res","test","properties","input","createElement","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","isMust","withdefaultCSS","setProps","appendChild","className","obj","style","shouldGetCSS","attr","inputText"],"mappings":"4LAAAA,QAAQC,IAAI,6BA2BF,SAAJC,YACEC,SAASC,eAAeC,GA1BhC,IAAMC,EAAW,gDACXC,EAAW,2BACXC,EAAS,2CACTC,EAAiB,wBAEjBC,EAAc,SACV,cACF,eACE,8BACG,sBACK,sBACD,qBACR,iCACM,qBACF,6DAmDPC,EAAc,SAACN,EAAIO,OACpBC,EAAYX,EAAEG,GAAIS,WAAW,GAG7BC,EAAa,IAAIC,MAAMH,EAAW,KAChC,SAACI,EAAQC,EAAKC,UACXC,QAAQC,IAAIJ,EAAQC,EAAKC,QAE5B,SAACF,EAAQC,EAAKI,EAAOH,SACb,SAARD,MACIA,GAAOI,GAERF,QAAQG,IAAIN,EAAQC,EAAKI,EAAOH,QAG/BK,iBAAiB,QAAS,cACxBC,KAAOC,EAAET,OAAOK,cACnBrB,aAAac,EAAWU,UAC5BE,EAAYC,EAAWb,EAAWU,KAAMb,kBACpCX,IAAOW,EAAKiB,SAAQF,GACrBZ,EAAWU,QAIdG,EAAa,SAACE,EAAKlB,OACpBmB,gBACInB,EAAKiB,UACL,UACGvB,EAAS0B,KAAKF,aAEjB,UACGvB,EAASyB,KAAKF,aAEjB,QACGtB,EAAOwB,KAAKF,aAEf,aACGrB,EAAeuB,KAAKF,oBAGpB,SAGJC,UAvDK,SAAC1B,EAAI4B,OACbC,EAAQ/B,SAASgC,cAAc,SAC/BvB,EA1BY,oBAChBwB,KAAAA,aAAO,WACPC,UAAAA,oBACAC,QAAAA,oBACAC,SAAAA,oBACAC,SAAAA,oBACAC,YAAAA,oBACAC,YAAAA,aAAc,qBACdC,OAAAA,gBACCd,IAAAA,SACAe,qBACK,8HAeKC,CAASZ,GAAc,MAChC5B,GAAIyC,YAAYZ,KAChB7B,GAAIS,WAAW,GAAGiC,UAAY,mBAxClB,SAACC,EAAKC,EAAOC,MACxBA,MACK,IAAIC,KAAQF,IACXA,MAAME,GAAQF,EAAME,IAsCtBjB,EAAOxB,EAAaE,EAAKgC,kBAC1BF,YAAc9B,EAAK8B,gBACrBU,EAAYzC,EAAYN,EAAIO,WACxBX,YAAYmD"}