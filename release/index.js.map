{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'inline-block',\r\n\twidth: '90%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'cn',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n\ttype,\r\n\twithdefaultCSS = true,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n\tisMust,\r\n\ttype,\r\n\twithdefaultCSS,\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\r\n\t// 绑定一个class\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\r\n\t// 设置css\r\n\tsetCss(input, deaultStyle, prop.withdefaultCSS);\r\n\r\n\t// 设置placeholder\r\n\tinput.placeholder = prop.placeholder;\r\n\r\n\t// 绑定监听输入\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\r\n\t// 展示eye\r\n\tdrawEye(prop);\r\n\t// 展示clear\r\n\tdrawClear(prop);\r\n\t// 是否必填\r\n\tdrawMust(id, prop);\r\n};\r\n\r\nconst setCss = (obj, style, shouldGetCSS) => {\r\n\tif (shouldGetCSS) {\r\n\t\tfor (let attr in style) {\r\n\t\t\tobj.style[attr] = style[attr];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\r\n\t\t// 检查格式\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(`${prop.type}+${formatRes}`);\r\n\r\n\t\t// 渲染hint\r\n\t\tdrawHint(prop);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res;\r\n\tswitch (prop.type) {\r\n\t\tcase 'email':\r\n\t\t\tres = regEmail.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'phone':\r\n\t\t\tres = regPhone.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'web':\r\n\t\t\tres = regWeb.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'password':\r\n\t\t\tres = deaultPassword.test(val);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tres = true;\r\n\t\t\tbreak;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nconst drawHint = prop => {};\r\nconst drawEye = prop => {};\r\nconst drawClear = prop => {};\r\nconst drawMust = (id, prop) => {\r\n\tif (prop.isMust) {\r\n    console.log('draw must');\r\n    let must = document.createElement('span');\r\n    must.innerHTML = \"*\";\r\n    must.style.color = \"red\";\r\n    must.style.margin = \"0 0 0 5px\";\r\n    $(id).appendChild(must);\r\n\t}\r\n};\r\nexport { init };\r\n"],"names":["console","log","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","$","document","getElementById","id","setProps","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","isMust","type","withdefaultCSS","init","properties","input","createElement","prop","appendChild","childNodes","className","inputText","watchTyping","setCss","obj","style","shouldGetCSS","attr","inputNode","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","val","res","test","drawMust","must","innerHTML","color","margin"],"mappings":"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"}