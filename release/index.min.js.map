{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'inline-block',\r\n\twidth: '80%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'cn',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n\tmustPosition = 'left',\r\n\ttype,\r\n\twithdefaultCSS = true,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n  isMust,\r\n  mustPosition,\r\n\ttype,\r\n\twithdefaultCSS,\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\r\n\t// 绑定一个class\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\r\n\t// 设置css\r\n\tsetCss(input, deaultStyle, prop.withdefaultCSS);\r\n\r\n\t// 设置placeholder\r\n\tinput.placeholder = prop.placeholder;\r\n\r\n\t// 绑定监听输入\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\r\n\t// 展示eye\r\n\tdrawEye(prop);\r\n\t// 展示clear\r\n\tdrawClear(prop);\r\n\t// 是否必填\r\n\tdrawMust(id, prop);\r\n};\r\n\r\nconst setCss = (obj, style, shouldGetCSS) => {\r\n\tif (shouldGetCSS) {\r\n\t\tfor (let attr in style) {\r\n\t\t\tobj.style[attr] = style[attr];\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\r\n\t\t// 检查格式\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(`${prop.type}+${formatRes}`);\r\n\r\n\t\t// 渲染hint\r\n\t\tdrawHint(prop);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res;\r\n\tswitch (prop.type) {\r\n\t\tcase 'email':\r\n\t\t\tres = regEmail.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'phone':\r\n\t\t\tres = regPhone.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'web':\r\n\t\t\tres = regWeb.test(val);\r\n\t\t\tbreak;\r\n\t\tcase 'password':\r\n\t\t\tres = deaultPassword.test(val);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tres = true;\r\n\t\t\tbreak;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nconst drawHint = prop => {};\r\nconst drawEye = prop => {};\r\nconst drawClear = prop => {};\r\nconst drawMust = (id, prop) => {\r\n\tif (prop.isMust) {\r\n\t\tconsole.log('draw must');\r\n\t\tlet must = document.createElement('span');\r\n\t\tmust.innerHTML = '*';\r\n\t\tmust.style.color = 'red';\r\n\t\tmust.style.margin = '0 5px';\r\n\t\tswitch (prop.mustPosition) {\r\n\t\t\tcase 'left':\r\n\t\t\t\tlet inputNode = $(id).childNodes[0];\r\n\t\t\t\t$(id).insertBefore(must, inputNode);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\t$(id).appendChild(must);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\nexport { init };\r\n"],"names":["console","log","$","document","getElementById","id","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","setCss","obj","style","shouldGetCSS","attr","watchTyping","prop","inputNode","childNodes","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","type","val","res","test","drawMust","isMust","must","createElement","innerHTML","color","margin","mustPosition","insertBefore","appendChild","properties","input","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","withdefaultCSS","setProps","className","inputText"],"mappings":"4LAAAA,QAAQC,IAAI,6BAmBF,SAAJC,YACEC,SAASC,eAAeC,GAlBhC,IAAMC,EAAW,gDACXC,EAAW,2BACXC,EAAS,2CACTC,EAAiB,wBAEjBC,EAAc,SACV,qBACF,cACE,8BACG,sBACK,sBACD,qBACR,iCACM,qBACF,6DA2DPC,EAAS,SAACC,EAAKC,EAAOC,MACvBA,MACE,IAAIC,KAAQF,IACZA,MAAME,GAAQF,EAAME,IAKrBC,EAAc,SAACX,EAAIY,OACpBC,EAAYhB,EAAEG,GAAIc,WAAW,GAI7BC,EAAa,IAAIC,MAAMH,EAAW,KAChC,SAACI,EAAQC,EAAKC,UACXC,QAAQC,IAAIJ,EAAQC,EAAKC,QAE5B,SAACF,EAAQC,EAAKI,EAAOH,SACb,SAARD,MACIA,GAAOI,GAERF,QAAQG,IAAIN,EAAQC,EAAKI,EAAOH,QAI/BK,iBAAiB,QAAS,cACxBC,KAAOC,EAAET,OAAOK,cACnB1B,aAAamB,EAAWU,UAG5BE,EAAYC,EAAWb,EAAWU,KAAMb,kBACpChB,IAAOgB,EAAKiB,SAAQF,GAIrBZ,EAAWU,QAIdG,EAAa,SAACE,EAAKlB,OACpBmB,gBACInB,EAAKiB,UACP,UACE5B,EAAS+B,KAAKF,aAEhB,UACE5B,EAAS8B,KAAKF,aAEhB,QACE3B,EAAO6B,KAAKF,aAEd,aACE1B,EAAe4B,KAAKF,oBAGpB,SAGDC,GAMFE,EAAW,SAACjC,EAAIY,MACjBA,EAAKsB,OAAQ,SACRtC,IAAI,iBACRuC,EAAOrC,SAASsC,cAAc,iBAC7BC,UAAY,MACZ7B,MAAM8B,MAAQ,QACd9B,MAAM+B,OAAS,QACZ3B,EAAK4B,kBACP,WACA3B,EAAYhB,EAAEG,GAAIc,WAAW,KAC/Bd,GAAIyC,aAAaN,EAAMtB,aAErB,UACFb,GAAI0C,YAAYP,aAvGT,SAACnC,EAAI2C,OACbC,EAAQ9C,SAASsC,cAAc,SAC/BxB,EA5BY,oBAChBiC,KAAAA,aAAO,WACPC,UAAAA,oBACAC,QAAAA,oBACAC,SAAAA,oBACAC,SAAAA,oBACAC,YAAAA,oBACAC,YAAAA,aAAc,qBACdjB,OAAAA,oBACAM,aAAAA,aAAe,SACfX,IAAAA,SACAuB,qBACM,6IAgBKC,CAASV,GAAc,MAChC3C,GAAI0C,YAAYE,KAGhB5C,GAAIc,WAAW,GAAGwC,UAAY,qBAGzBV,EAAOvC,EAAaO,EAAKwC,kBAG1BD,YAAcvC,EAAKuC,gBAGrBI,EAAY5C,EAAYX,EAAIY,WACxBhB,YAAY2D,KAOXvD,EAAIY"}