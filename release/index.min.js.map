{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["console.log('welcome to use formCheck!');\r\n\r\nconst regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\nconst regPhone = /^[1][3,4,5,7,8][0-9]{9}$/;\r\nconst regWeb = /^((https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/;\r\nconst deaultPassword = /^[a-zA-Z0-9]\\w{5,17}$/;\r\n\r\nconst deaultStyle = {\r\n\tdisplay: 'block',\r\n\twidth: '100%',\r\n\tpadding: '0.375rem 0.75rem',\r\n\tlineHeight: '1.5',\r\n\tbackgroundColor: '#fff',\r\n\tbackgroundClip: 'padding-box',\r\n\tborder: '1px solid #ced4da',\r\n\tborderRadius: '0.25rem',\r\n\ttransition: 'border-color .15s ease-in-out,box-shadow .15s ease-in-out',\r\n};\r\n\r\nconst setCss = (obj, style) => {\r\n  for (let attr in style){\r\n    obj.style[attr] = style[attr];\r\n  };\r\n};\r\n\r\nconst $ = id => {\r\n\treturn document.getElementById(id);\r\n};\r\n\r\nconst setProps = ({\r\n\tlang = 'en',\r\n\tshowClear = false,\r\n\tshowEye = false,\r\n\tshowHint = true,\r\n\tshowHelp = false,\r\n\tshowAutofix = false,\r\n\tplaceholder = 'please input',\r\n\tisMust = false,\r\n\tisPhone = false,\r\n\tisWeb = false,\r\n\tisEmail = false,\r\n\tisPassword = false,\r\n}) => ({\r\n\tlang,\r\n\tshowClear,\r\n\tshowEye,\r\n\tshowHint,\r\n\tshowHelp,\r\n\tshowAutofix,\r\n\tplaceholder,\r\n\tisMust,\r\n\tisPhone,\r\n\tisWeb,\r\n\tisEmail,\r\n\tisPassword,\r\n});\r\n\r\nconst init = (id, properties) => {\r\n\tlet input = document.createElement('input');\r\n\tlet prop = setProps(properties || {});\r\n\t$(id).appendChild(input);\r\n\t$(id).childNodes[0].className = 'form-check-input';\r\n\tsetCss(input, deaultStyle);\r\n\tinput.placeholder = prop.placeholder;\r\n\tlet inputText = watchTyping(id, prop);\r\n\tconsole.log(`目前的值是${inputText}`);\r\n\t// formatTest(inputText, prop);\r\n};\r\n\r\nconst watchTyping = (id, prop) => {\r\n\tlet inputNode = $(id).childNodes[0];\r\n\tlet oVal;\r\n\tlet obj = {};\r\n\tlet proxyInput = new Proxy(inputNode, {\r\n\t\tget: (target, key, receiver) => {\r\n\t\t\treturn Reflect.get(target, key, receiver);\r\n\t\t},\r\n\t\tset: (target, key, value, receiver) => {\r\n\t\t\tif (key === 'text') {\r\n\t\t\t\ttarget[key] = value;\r\n\t\t\t}\r\n\t\t\treturn Reflect.set(target, key, value, receiver);\r\n\t\t},\r\n\t});\r\n\tinputNode.addEventListener('keyup', e => {\r\n\t\tproxyInput.text = e.target.value;\r\n\t\tconsole.log(`input:${proxyInput.text}`);\r\n\t\tlet formatRes = formatTest(proxyInput.text, prop);\r\n\t\tconsole.log(formatRes);\r\n\t\treturn proxyInput.text;\r\n\t});\r\n};\r\n\r\nconst formatTest = (val, prop) => {\r\n\tlet res = {};\r\n\tif (prop.isPhone) {\r\n\t\tlet phone = regPhone.test(val);\r\n\t\tconsole.log(phone);\r\n\t\tres['phone'] = phone;\r\n\t}\r\n\tif (prop.isEmail) {\r\n\t\tlet email = regEmail.test(val);\r\n\t\tconsole.log(email);\r\n\t\tres['email'] = email;\r\n\t}\r\n\tif (prop.isWeb) {\r\n\t\tlet web = regWeb.test(val);\r\n\t\tconsole.log(web);\r\n\t\tres['web'] = web;\r\n\t}\r\n\tif (prop.isPassword) {\r\n\t\tlet password = deaultPassword.test(val);\r\n\t\tconsole.log(password);\r\n\t\tres['password'] = password;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport { init };\r\n"],"names":["console","log","$","document","getElementById","id","regEmail","regPhone","regWeb","deaultPassword","deaultStyle","watchTyping","prop","inputNode","childNodes","proxyInput","Proxy","target","key","receiver","Reflect","get","value","set","addEventListener","text","e","formatRes","formatTest","val","res","isPhone","phone","test","isEmail","email","isWeb","web","isPassword","password","properties","input","createElement","lang","showClear","showEye","showHint","showHelp","showAutofix","placeholder","isMust","setProps","appendChild","className","obj","style","attr","inputText"],"mappings":"4LAAAA,QAAQC,IAAI,6BAyBF,SAAJC,YACEC,SAASC,eAAeC,GAxBhC,IAAMC,EAAW,gDACXC,EAAW,2BACXC,EAAS,2CACTC,EAAiB,wBAEjBC,EAAc,SACV,cACF,eACE,8BACG,sBACK,sBACD,qBACR,iCACM,qBACF,6DAqDPC,EAAc,SAACN,EAAIO,OACpBC,EAAYX,EAAEG,GAAIS,WAAW,GAG7BC,EAAa,IAAIC,MAAMH,EAAW,KAChC,SAACI,EAAQC,EAAKC,UACXC,QAAQC,IAAIJ,EAAQC,EAAKC,QAE5B,SAACF,EAAQC,EAAKI,EAAOH,SACb,SAARD,MACIA,GAAOI,GAERF,QAAQG,IAAIN,EAAQC,EAAKI,EAAOH,QAG/BK,iBAAiB,QAAS,cACxBC,KAAOC,EAAET,OAAOK,cACnBrB,aAAac,EAAWU,UAC5BE,EAAYC,EAAWb,EAAWU,KAAMb,kBACpCX,IAAI0B,GACLZ,EAAWU,QAIdG,EAAa,SAACC,EAAKjB,OACpBkB,EAAM,MACNlB,EAAKmB,QAAS,KACbC,EAAQzB,EAAS0B,KAAKJ,WAClB5B,IAAI+B,KACZ,MAAeA,KAEZpB,EAAKsB,QAAS,KACbC,EAAQ7B,EAAS2B,KAAKJ,WAClB5B,IAAIkC,KACZ,MAAeA,KAEZvB,EAAKwB,MAAO,KACXC,EAAM7B,EAAOyB,KAAKJ,WACd5B,IAAIoC,KACZ,IAAaA,KAEVzB,EAAK0B,WAAY,KAChBC,EAAW9B,EAAewB,KAAKJ,WAC3B5B,IAAIsC,KACZ,SAAkBA,SAEZT,UA1DK,SAACzB,EAAImC,OACbC,EAAQtC,SAASuC,cAAc,SAC/B9B,EA9BY,oBAChB+B,KAAAA,aAAO,WACPC,UAAAA,oBACAC,QAAAA,oBACAC,SAAAA,oBACAC,SAAAA,oBACAC,YAAAA,oBACAC,YAAAA,aAAc,qBACdC,OAAAA,oBACAnB,QAAAA,oBACAK,MAAAA,oBACAF,QAAAA,oBACAI,iBACM,+IAiBKa,CAASX,GAAc,MAChCnC,GAAI+C,YAAYX,KAChBpC,GAAIS,WAAW,GAAGuC,UAAY,mBA1ClB,SAACC,EAAKC,OACd,IAAIC,KAAQD,IACXA,MAAMC,GAAQD,EAAMC,IAyCpBf,EAAO/B,KACRuC,YAAcrC,EAAKqC,gBACrBQ,EAAY9C,EAAYN,EAAIO,WACxBX,YAAYwD"}